#ifndef LOG_H
#define LOG_H

/*
 * 로그 기록 기능을 제공하는 모듈.
 * entr 프로그램은 파일 변경 이벤트가 발생할 때 이를 로그 파일에 기록하는 옵션을 추가할 수 있음.
 * 이 헤더는 log.c에서 구현된 함수들을 외부에서 사용할 수 있도록 선언해 둔다.
 */

#include <stdio.h>
#include <time.h>

/*
 * -----------------------------------------------
 * - 로그 파일을 열어 기록 준비를 한다.
 * - path: 생성 또는 append할 로그 파일 경로
 * - 성공하면 0, 실패하면 -1 리턴
 */
int log_open(const char *path);

/*
 * -----------------------------------------------
 * - 변경된 파일 이름을 로그 파일에 기록한다.
 * - 로그는 "타임스탬프 + 파일명" 형태로 한 줄씩 저장됨.
 * - log_open()이 먼저 호출되어야 정상 동작한다.
 */
void log_write(const char *filename);

/*
 * -----------------------------------------------
 * - 열려 있는 로그 파일 포인터를 닫는다.
 * - 프로그램 종료 시 반드시 호출해야 파일이 안전하게 저장됨.
 */
void log_close(void);

#endif